{
  "$schema": "https://railway.app/railway.schema.json",
  "build": {
    "builder": "nixpacks",
    "buildCommand": "npm ci && npm run build",
    "startCommand": "node dist/main.js"
  },
  "deploy": {
    "healthcheckPath": "/api/health",
    "healthcheckTimeout": 300,
    "restartPolicyType": "on_failure",
    "restartPolicyMaxRetries": 3,
    "sleepMode": false
  },
  "advanced": {
    "referenceResolution": "strict",
    "integrityValidation": {
      "enabled": true,
      "interval": "5m",
      "checksum": "sha256"
    },
    "buildContext": {
      "rootDirectory": "zephix-backend",
      "validateStructure": true,
      "requiredFiles": [
        "package.json",
        "src/main.ts",
        "tsconfig.json"
      ]
    },
    "deployment": {
      "strategy": "blue-green",
      "rollback": {
        "enabled": true,
        "automatic": true,
        "threshold": 3
      },
      "healthCheck": {
        "initialDelay": 30,
        "period": 10,
        "timeout": 5,
        "successThreshold": 1,
        "failureThreshold": 3
      }
    }
  }
}
