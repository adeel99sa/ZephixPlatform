# Root Directory must be zephix-backend. Start command must NOT contain "cd zephix-backend".
[build]
builder = "nixpacks"
buildCommand = "npm run build"

[deploy]
preDeployCommand = "npm run db:migrate"
startCommand = "npm run start:railway"
healthcheckPath = "/api/health/ready"
healthcheckTimeout = 120
restartPolicyType = "on_failure"
restartPolicyMaxRetries = 3

# NODE_ENV is set per-environment in Railway dashboard/CLI
# Do not override here as it would force "production" for all envs
